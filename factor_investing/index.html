<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Factor Investing in Commodities - Factor-Based Commodity Investing</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Factor Investing in Commodities";
        var mkdocs_page_input_path = "factor_investing.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> Factor-Based Commodity Investing
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="#">Factor Investing in Commodities</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#commodity-futures">Commodity Futures</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#commodity-factor-portfolios">Commodity Factor Portfolios</a>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../is_physical_risk_priced/">Is Physical Risk Priced?</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Factor-Based Commodity Investing</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Factor Investing in Commodities</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/tlorans/commo_factors/edit/master/docs/factor_investing.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="factor-investing-in-commodities">Factor investing in commodities</h1>
<p>When using <code>yfinance</code> for commodity futures, we observe only the <strong>front-month futures prices</strong>, typically rolled automatically.</p>
<p>This allows us to construct:</p>
<ul>
<li><strong>Excess returns</strong> on fully collateralized long futures positions.</li>
<li><strong>Momentum</strong> from rolling 12-month returns.</li>
<li><strong>Average Commodity Factor</strong> as the equal-weighted return across contracts.</li>
</ul>
<p>However, we cannot construct basis-related factors:</p>
<ul>
<li><strong>Basis</strong> requires both front- and second-nearby prices.</li>
<li><strong>Basis-Momentum</strong> needs the term structure slope over time.</li>
</ul>
<p>Thus, our tests will focus on factors we can construct reliably with <code>yfinance</code>.</p>
<h2 id="commodity-futures">Commodity Futures</h2>
<p>Yahoo Finance provides daily prices of nearest futures contracts, specifically what they call <strong>continuous front-month futures</strong> for commodities (e.h., <code>CL=F</code> for WTI Crude Oil). These are automatically rolled contracts and do not represent a specific maturity date.</p>
<p><img alt="Soybean Futures Prices" src="../images/priced_factors/soybean_futures_prices.png" /></p>
<p>We can now calculate the daily returns for each commodity futures contract. </p>
<p><img alt="Distribution of daily returns Soybean futures returns" src="../images/priced_factors/soybeans_returns_distribution.png" /></p>
<p>We can also compute the descriptive statistics of the daily returns for all commodity futures. </p>
<p><img alt="Commodity Futures Prices" src="../images/priced_factors/commodity_futures_prices.png" /></p>
<h2 id="commodity-factor-portfolios">Commodity Factor Portfolios</h2>
<p>To form the commodity factor portfolios, we rely on the simple portfolio sort. The idea is simple. On one date:</p>
<ol>
<li>Rank commodities according to a particular criterion (e.g., past returns).</li>
<li>form \(J \geq 2\) portfolios (i.e., homogenous groups) consisting on the same number of stocks according to the ranking (usually \(J=2\), \(J=3\), \(J=5\) or \(J=10\) portfolios are built, based on the median, terciles, quintiles or deciles of the criterion);</li>
<li>the weight of stocks inside the portfolio is uniform in our case.</li>
<li>at a future date \(t+1\), report the returns of the portfolios. Then iterate the procedure until the chronological end of the sample.</li>
</ol>
<p>The outcome is a time series of portfolio returns \(r^j_t\) for each portfolio \(j\) and time \(t\). An anomaly is identified if the \(t\)-test between the first \(j=1\) and the last group \(j=J\) unveils a significant difference in average returns. </p>
<p>We first construct the momentum characteristic, which is the cumulative return of the past 11 months (excluding the most recent month). This is done by calculating the cumulative product of \(1 + r_t\) for the past 11 months.</p>
<p>We will rebalance the portfolios monthly, using the momentum characteristic to sort the commodities into two portfolios. </p>
<p>Interestingly, the low momentum portfolio seems to outperform the high momentum portfolio, which is contrary to the typical expectation in momentum strategies. </p>
<p><img alt="Cumulative Return: Momentum Long-Short vs. Commodity Market" src="../images/priced_factors/momentum_portfolios.png" /></p>
<p>Based on the previous insights, we construct a <strong>reversal portfolio</strong> by taking the difference between the low and high momentum portfolios. In other words, we create a long-short portfolio that goes long on the low momentum portfolio and short on the high momentum portfolio.</p>
<p><img alt="Cumulative Long-Short Momentum Returns" src="../images/priced_factors/momentum_long_short.png" /></p>
<p>We now compare the cumulative returns of the long-short reversal portfolio with the equal-weighted market portfolio. The market portfolio is constructed by averaging the daily returns of all commodities, which gives us a benchmark to assess the performance of our reversal strategy.</p>
<p><img alt="Cumulative Return: Momentum Long-Short vs. Commodity Market" src="../images/priced_factors/momentum_long_short_vs_market.png" /></p>
<p>We can finally test the significance of the long-short portfolio returns using a t-test. This will help us determine if the average returns of the long-short portfolio are significantly different from zero.</p>
<pre><code class="language-bash">OLS Model:
long_short ~ 1

Coefficients:
           Estimate  Std. Error  t-Statistic  p-Value
Intercept       0.0         0.0         2.17     0.03

Summary statistics:
- Number of observations: 3,672
- R-squared: 0.000, Adjusted R-squared: 0.000
- F-statistic not available
</code></pre>
<p>Since p = 0.03 &lt; 0.05, we can reject the null of zero mean at the 5 % level. This means that the average return of the long-short reversal portfolio is statistically significant, indicating that the strategy has a positive expected return over the sample period.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href=".." class="btn btn-neutral float-left" title="Home"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../is_physical_risk_priced/" class="btn btn-neutral float-right" title="Is Physical Risk Priced?">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/tlorans/commo_factors" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href=".." style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../is_physical_risk_priced/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
